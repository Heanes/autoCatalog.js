"use strict";!function(a,b,c){a.fn.autoCatalog=function(d){function k(a,b,c,d,e,f,g,h){var l,i=d.height(),j=e.height(),k=j-i;6>b?(e.stop().animate({top:"0"},"fast"),f.removeClass("disable"),g.addClass("disable")):b>8?(e.stop().animate({top:-k},"fast"),f.addClass("disable"),g.removeClass("disable")):(l=parseInt(e.css("top"))+i/2-(a.offset().top-c.offset().top),e.stop().animate({top:l},"fast"),f.removeClass("disable"),g.removeClass("disable")),h.stop().animate({top:a.position().top+h.height()/2-3},"fast")}function l(a){return'<div class="anchor-list"><a name="'+a.anchorAddress+'" class="lemma-anchor para-title anchor-address"></a>'+'<a name="sub1001_'+a.anchorAddress+'" class="lemma-anchor-address"></a>'+'<a name="'+a.anchorName+'" class="lemma-anchor anchor-name"></a>'+"</div>"}function m(a,b,c,d){var e="";return 1==b?e='<dt class="catalog-title level1"><em class="pointer"></em><span class="text"><span class="title-index">'+a.anchorAddress+"</span>"+'<a href="#'+a.anchorAddress+'" class="title-link">'+a.anchorName+"</a>"+"</span>"+"</dt>":2==b&&(e='<dd class="catalog-title level2">',f.showLevel2Pointer&&(e+='<em class="pointer"></em>'),e+='<span class="text"><span class="title-index">'+c+"."+(d-1)+"</span>"+'<a href="#'+a.anchorAddress+'" class="title-link">'+a.anchorName+"</a>"+"</span>"+"</dd>"),e}var e={level1:"h2",level2:"h3",catalogContainer:c,step:48,alwaysShow:!0,collapseOnInit:!1,showLevel2Pointer:!1},f=a.extend({},e,d||{}),g=this,h=g.find(f.level1+","+f.level2),i=h.length,j=f.catalogContainer;return!j||j.length<=0?(console.warn("autoCatalog.js: Not find where to place the catalog, so the catalog will not generate."),null):this.each(function(){var c,d,e,n,o,p,q,r,s,t,u,v,w,x,y,z,A;g.find(".anchor-list").remove(),c='<div class="side-catalog"><div class="side-bar"><em class="circle start"></em><em class="circle end"></em></div><div class="catalog-scroller"><dl class="catalog-list"><a class="arrow" href="javascript:void(0);"></a></dl></div><div class="right-wrap"><a class="go-up disable" href="javascript:void(0);"></a><a class="go-down" href="javascript:void(0);"></a></div><div class="bottom-wrap"><a class="toggle-button" href="javascript:void(0);"></a><a class="gotop-button" href="javascript:void(0);"></a></div></div>',j.empty().append(c),d=j.find(".side-catalog"),f.alwaysShow&&d.css({visibility:"visible",opacity:1}),f.collapseOnInit&&d.addClass("collapse"),e=1,n=1,o="",p="",q={},r=1,h.each(function(b,c){(c.tagName.toLowerCase()==f.level1.toLowerCase()||a(c).hasClass(f.level1))&&(r=1,n>1&&e++,o=e,e++,n=1),(c.tagName.toLowerCase()==f.level2.toLowerCase()||a(c).hasClass(f.level2))&&(r=2,1==n&&e--,o=e+"_"+n,n++),p=a(c).text().trim(),q={anchorName:p,anchorAddress:o},a(c).before(l(q)),d.find(".catalog-list").append(m(q,r,e,n))}),s=d.find(".catalog-scroller"),t=d.find(".catalog-list"),u=s.height(),v=t.height(),w=v-u,x=f.step,y=d.find(".go-up"),y.on("click",function(){return a(this).hasClass("disable")||(Math.abs(parseInt(t.css("top")))>=x?(t.stop().animate({top:"+="+x},"fast"),z.removeClass("disable")):(t.stop().animate({top:"0"},"fast"),a(this).addClass("disable"))),!1}),z=d.find(".go-down"),z.on("click",function(){return a(this).hasClass("disable")||(w-Math.abs(parseInt(t.css("top")))>=x?(d.find(".catalog-list").stop().animate({top:"-="+x},"fast"),y.removeClass("disable")):(t.stop().animate({top:-w},"fast"),a(this).addClass("disable"))),!1}),t.find(".catalog-title").eq(0).addClass("highlight").siblings(".catalog-title").removeClass("highlight"),a(b).on("scroll",function(){var b,c;for(f.alwaysShow||(a(this).scrollTop()>=g.position().top?d.css({visibility:"visible"}).animate({opacity:1},"fast"):d.css({visibility:"hidden"}).animate({opacity:0},"fast")),a(this).scrollTop()>=g.position().top+g.height()?d.css({visibility:"hidden"}).animate({opacity:0},"fast"):d.css({visibility:"visible"}).animate({opacity:1},"fast"),b=i-1;b>=0;b--){if(c=b,a(this).scrollTop()>=h.eq(b).offset().top-h.eq(b).height())return t.find(".catalog-title").eq(c).addClass("highlight").siblings(".catalog-title").removeClass("highlight"),k(t.find(".catalog-title").eq(c),c,d,s,t,z,y,A),!1;t.find(".catalog-title").eq(0).addClass("highlight").siblings(".catalog-title").removeClass("highlight")}}),A=s.find(".arrow"),d.find(".toggle-button").on("click",function(){d.hasClass("collapse")?d.removeClass("collapse"):d.addClass("collapse")}),d.find(".gotop-button").on("click",function(){return a("body,html").animate({scrollTop:g.position().top},"slow"),!1}),a(b).trigger("scroll")})}}(jQuery,window);